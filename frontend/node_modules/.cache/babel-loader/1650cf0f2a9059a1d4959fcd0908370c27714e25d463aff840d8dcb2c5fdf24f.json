{"ast":null,"code":"'use strict';\n\nconst Iconv = require('iconv-lite');\nconst LRU = require('lru-cache').default;\nconst decoderCache = new LRU({\n  max: 500\n});\nexports.decode = function (buffer, encoding, start, end, options) {\n  if (Buffer.isEncoding(encoding)) {\n    return buffer.toString(encoding, start, end);\n  }\n\n  // Optimize for common case: encoding=\"short_string\", options=undefined.\n  let decoder;\n  if (!options) {\n    decoder = decoderCache.get(encoding);\n    if (!decoder) {\n      decoder = Iconv.getDecoder(encoding);\n      decoderCache.set(encoding, decoder);\n    }\n  } else {\n    const decoderArgs = {\n      encoding,\n      options\n    };\n    const decoderKey = JSON.stringify(decoderArgs);\n    decoder = decoderCache.get(decoderKey);\n    if (!decoder) {\n      decoder = Iconv.getDecoder(decoderArgs.encoding, decoderArgs.options);\n      decoderCache.set(decoderKey, decoder);\n    }\n  }\n  const res = decoder.write(buffer.slice(start, end));\n  const trail = decoder.end();\n  return trail ? res + trail : res;\n};\nexports.encode = function (string, encoding, options) {\n  if (Buffer.isEncoding(encoding)) {\n    return Buffer.from(string, encoding);\n  }\n  const encoder = Iconv.getEncoder(encoding, options || {});\n  const res = encoder.write(string);\n  const trail = encoder.end();\n  return trail && trail.length > 0 ? Buffer.concat([res, trail]) : res;\n};","map":{"version":3,"names":["Iconv","require","LRU","default","decoderCache","max","exports","decode","buffer","encoding","start","end","options","Buffer","isEncoding","toString","decoder","get","getDecoder","set","decoderArgs","decoderKey","JSON","stringify","res","write","slice","trail","encode","string","from","encoder","getEncoder","length","concat"],"sources":["/Users/rifkyroudana/node_modules/mysql2/lib/parsers/string.js"],"sourcesContent":["'use strict';\n\nconst Iconv = require('iconv-lite');\nconst LRU = require('lru-cache').default;\n\nconst decoderCache = new LRU({\n  max: 500,\n});\n\nexports.decode = function (buffer, encoding, start, end, options) {\n  if (Buffer.isEncoding(encoding)) {\n    return buffer.toString(encoding, start, end);\n  }\n\n  // Optimize for common case: encoding=\"short_string\", options=undefined.\n  let decoder;\n  if (!options) {\n    decoder = decoderCache.get(encoding);\n    if (!decoder) {\n      decoder = Iconv.getDecoder(encoding);\n      decoderCache.set(encoding, decoder);\n    }\n  } else {\n    const decoderArgs = { encoding, options };\n    const decoderKey = JSON.stringify(decoderArgs);\n    decoder = decoderCache.get(decoderKey);\n    if (!decoder) {\n      decoder = Iconv.getDecoder(decoderArgs.encoding, decoderArgs.options);\n      decoderCache.set(decoderKey, decoder);\n    }\n  }\n\n  const res = decoder.write(buffer.slice(start, end));\n  const trail = decoder.end();\n\n  return trail ? res + trail : res;\n};\n\nexports.encode = function (string, encoding, options) {\n  if (Buffer.isEncoding(encoding)) {\n    return Buffer.from(string, encoding);\n  }\n\n  const encoder = Iconv.getEncoder(encoding, options || {});\n\n  const res = encoder.write(string);\n  const trail = encoder.end();\n\n  return trail && trail.length > 0 ? Buffer.concat([res, trail]) : res;\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,KAAK,GAAGC,OAAO,CAAC,YAAY,CAAC;AACnC,MAAMC,GAAG,GAAGD,OAAO,CAAC,WAAW,CAAC,CAACE,OAAO;AAExC,MAAMC,YAAY,GAAG,IAAIF,GAAG,CAAC;EAC3BG,GAAG,EAAE;AACP,CAAC,CAAC;AAEFC,OAAO,CAACC,MAAM,GAAG,UAAUC,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,GAAG,EAAEC,OAAO,EAAE;EAChE,IAAIC,MAAM,CAACC,UAAU,CAACL,QAAQ,CAAC,EAAE;IAC/B,OAAOD,MAAM,CAACO,QAAQ,CAACN,QAAQ,EAAEC,KAAK,EAAEC,GAAG,CAAC;EAC9C;;EAEA;EACA,IAAIK,OAAO;EACX,IAAI,CAACJ,OAAO,EAAE;IACZI,OAAO,GAAGZ,YAAY,CAACa,GAAG,CAACR,QAAQ,CAAC;IACpC,IAAI,CAACO,OAAO,EAAE;MACZA,OAAO,GAAGhB,KAAK,CAACkB,UAAU,CAACT,QAAQ,CAAC;MACpCL,YAAY,CAACe,GAAG,CAACV,QAAQ,EAAEO,OAAO,CAAC;IACrC;EACF,CAAC,MAAM;IACL,MAAMI,WAAW,GAAG;MAAEX,QAAQ;MAAEG;IAAQ,CAAC;IACzC,MAAMS,UAAU,GAAGC,IAAI,CAACC,SAAS,CAACH,WAAW,CAAC;IAC9CJ,OAAO,GAAGZ,YAAY,CAACa,GAAG,CAACI,UAAU,CAAC;IACtC,IAAI,CAACL,OAAO,EAAE;MACZA,OAAO,GAAGhB,KAAK,CAACkB,UAAU,CAACE,WAAW,CAACX,QAAQ,EAAEW,WAAW,CAACR,OAAO,CAAC;MACrER,YAAY,CAACe,GAAG,CAACE,UAAU,EAAEL,OAAO,CAAC;IACvC;EACF;EAEA,MAAMQ,GAAG,GAAGR,OAAO,CAACS,KAAK,CAACjB,MAAM,CAACkB,KAAK,CAAChB,KAAK,EAAEC,GAAG,CAAC,CAAC;EACnD,MAAMgB,KAAK,GAAGX,OAAO,CAACL,GAAG,CAAC,CAAC;EAE3B,OAAOgB,KAAK,GAAGH,GAAG,GAAGG,KAAK,GAAGH,GAAG;AAClC,CAAC;AAEDlB,OAAO,CAACsB,MAAM,GAAG,UAAUC,MAAM,EAAEpB,QAAQ,EAAEG,OAAO,EAAE;EACpD,IAAIC,MAAM,CAACC,UAAU,CAACL,QAAQ,CAAC,EAAE;IAC/B,OAAOI,MAAM,CAACiB,IAAI,CAACD,MAAM,EAAEpB,QAAQ,CAAC;EACtC;EAEA,MAAMsB,OAAO,GAAG/B,KAAK,CAACgC,UAAU,CAACvB,QAAQ,EAAEG,OAAO,IAAI,CAAC,CAAC,CAAC;EAEzD,MAAMY,GAAG,GAAGO,OAAO,CAACN,KAAK,CAACI,MAAM,CAAC;EACjC,MAAMF,KAAK,GAAGI,OAAO,CAACpB,GAAG,CAAC,CAAC;EAE3B,OAAOgB,KAAK,IAAIA,KAAK,CAACM,MAAM,GAAG,CAAC,GAAGpB,MAAM,CAACqB,MAAM,CAAC,CAACV,GAAG,EAAEG,KAAK,CAAC,CAAC,GAAGH,GAAG;AACtE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}